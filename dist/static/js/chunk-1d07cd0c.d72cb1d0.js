(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d07cd0c"],{"0ccb":function(e,t,n){var o=n("e330"),r=n("50c4"),a=n("577e"),i=n("1148"),s=n("1d80"),c=o(i),l=o("".slice),u=Math.ceil,d=function(e){return function(t,n,o){var i,d,f=a(s(t)),p=r(n),m=f.length,h=void 0===o?" ":a(o);return p<=m||""==h?f:(i=p-m,d=c(h,u(i/h.length)),d.length>i&&(d=l(d,0,i)),e?f+d:d+f)}};e.exports={start:d(!1),end:d(!0)}},"0e8f":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n("b775"),r=function(){return Object(o["a"])({url:"/company/department",method:"GET"})},a=function(){return Object(o["a"])({url:"/sys/user/simple",method:"GET"})},i=function(e){return Object(o["a"])({url:"/company/department",method:"POST",data:e})},s=function(e){return Object(o["a"])({url:"/company/department/".concat(e),method:"GET"})},c=function(e,t){return Object(o["a"])({url:"/company/department/".concat(e),method:"PUT",data:t})},l=function(e){return Object(o["a"])({url:"/company/department/".concat(e),method:"DELETE"})}},1148:function(e,t,n){"use strict";var o=n("5926"),r=n("577e"),a=n("1d80"),i=RangeError;e.exports=function(e){var t=r(a(this)),n="",s=o(e);if(s<0||s==1/0)throw i("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},"21a6":function(e,t,n){(function(n){var o,r,a;(function(n,i){r=[],o=i,a="function"===typeof o?o.apply(t,r):o,void 0===a||(e.exports=a)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function o(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){c(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=i.URL||i.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?a(c):r(c.href)?o(e,t,n):a(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){a(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),n);else if(r(e))o(e,n,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){a(s)}))}}:function(e,t,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,n);var a="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&c||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});i.saveAs=c.saveAs=c,e.exports=c}))}).call(this,n("c8ba"))},"36bf":function(e,t,n){},"4d90":function(e,t,n){"use strict";var o=n("23e7"),r=n("0ccb").start,a=n("9a0c");o({target:"String",proto:!0,forced:a},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5303:function(e,t,n){"use strict";n.r(t);n("fb6a"),n("b0c0");var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"app-container employeeLeft"},[t("div",{staticClass:"search"},[t("el-input",{attrs:{placeholder:"请输入员工姓名"},on:{input:e.treeSearch},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-tree",{ref:"tree",attrs:{"node-key":"id",data:e.lists,props:e.defaultProps,"expand-on-click-node":!1,"default-expand-all":!0,"highlight-current":!0},on:{"node-click":e.handleNodeClick}})],1),t("div",{staticClass:"app-container employeeRight"},[t("el-row",{staticClass:"employeeRightTop"},[t("el-button",{directives:[{name:"addPerson",rawName:"v-addPerson",value:"add-employee",expression:"'add-employee'"}],attrs:{type:"primary",size:"small"},on:{click:e.addEmployee}},[e._v("添加员工")]),t("el-button",{attrs:{size:"small"},on:{click:e.excelImport}},[e._v("excel导入")]),t("el-button",{attrs:{size:"small"},on:{click:e.excelExport}},[e._v("excel导出")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas}},[t("el-table-column",{attrs:{prop:"date",label:"头像",width:"180"},scopedSlots:e._u([{key:"default",fn:function(n){var o=n.row;return[o.staffPhoto?t("el-avatar",{attrs:{shape:"square",size:50,src:o.staffPhoto}}):t("el-avatar",{attrs:{shape:"square",size:50},scopedSlots:e._u([{key:"default",fn:function(){return[e._v(e._s(o.username.slice(2,3)))]},proxy:!0}],null,!0)})]}}])}),t("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),t("el-table-column",{attrs:{prop:"workNumber",label:"工号"}}),t("el-table-column",{attrs:{prop:"formOfEmployment",label:"聘用形式"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(1===n.formOfEmployment?"正式":"非正式")+" ")]}}])}),t("el-table-column",{attrs:{prop:"departmentName",label:"部门"}}),t("el-table-column",{attrs:{prop:"timeOfEntry",label:"入职时间"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(n){var o=n.row;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.tableLook(o)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.employeeRole(o.id)}}},[e._v("角色")]),t("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(t){return e.adelete(o)}}},[t("el-button",{staticClass:"delete",attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.params.page,"page-size":e.params.pagesize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1),t("EmployeeImport",{attrs:{dialogVisible:e.dialogVisible},on:{closeDialog:e.closeDialog,apiGetSysUser:e.apiGetSysUser}}),t("el-dialog",{attrs:{title:"分配角色",visible:e.roleDialogVisible,width:"60%","before-close":e.roleHandleClose},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[t("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.roleList,(function(n){return t("el-checkbox",{key:n.id,attrs:{label:n.id}},[e._v(e._s(n.name))])})),1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.roleCancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.roleDetermine}},[e._v("确 定")])],1)],1)],1)])},r=[],a=(n("14d9"),n("0e8f")),i=(n("a18c"),n("ef75")),s=n("cc5e"),c=n("ed08"),l=n("21a6"),u=n.n(l),d=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"员工导入",visible:e.dialogVisible,width:"30%","before-close":e.cacel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","http-request":e.httpRequest}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text dowload",on:{click:function(t){return t.stopPropagation(),e.dowload.apply(null,arguments)}}},[t("em",[e._v("下载导入模版")])]),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cacel}},[e._v("取 消")])],1)],1)},f=[],p=(n("d3b7"),{name:"EmployeeImport",props:{dialogVisible:{type:Boolean,require:!0}},methods:{cacel:function(e){this.$emit("closeDialog")},dowload:function(){var e=this;Object(i["b"])().then((function(e){u.a.saveAs(e,"模版.xlsx")})).catch((function(){e.$message.error("下载模版失败")}))},httpRequest:function(e){var t=this,n=new FormData;n.append("file",e.file),Object(i["f"])(n).then((function(){t.$message.success("上传成功")})).catch((function(){t.$message.error("上传失败")})).finally((function(){t.$emit("closeDialog"),t.$emit("apiGetSysUser")}))},submit:function(){console.log(123)}}}),m=p,h=(n("8769"),n("2877")),b=Object(h["a"])(m,d,f,!1,null,"02917e19",null),y=b.exports,v={name:"Department",components:{EmployeeImport:y},data:function(){return{datas:[],total:null,lists:[],defaultProps:{children:"children",label:"name"},params:{page:1,pagesize:10,keyword:"",departmentId:null},dialogVisible:!1,roleDialogVisible:!1,checkList:[],roleList:[],employeeId:""}},methods:{treeSearch:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.params.page=1,e.apiGetSysUser(e.params)}),300)},handleNodeClick:function(e){this.params.page=1,this.params.departmentId=e.id,this.apiGetSysUser(this.params)},apiGetSysUser:function(e){var t=this;this.$nextTick((function(){Object(i["c"])(e).then((function(e){t.datas=e.rows,t.total=e.total})).catch((function(){t.$message.error("获取失败")}))}))},handleCurrentChange:function(e){this.params.page=e,this.apiGetSysUser(this.params)},tableLook:function(e){this.$router.push("/employee/employeeDetails?id=".concat(e.id))},addEmployee:function(){this.$router.push("/employee/employeeDetails")},excelExport:function(){Object(i["e"])().then((function(e){u.a.saveAs(e,"员工信息表.xlsx")})).catch((function(){console.log("失败")}))},excelImport:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},adelete:function(e){var t=this;Object(i["a"])(e.id).then((function(){t.apiGetSysUser(t.params),t.$message.success("删除成功")})).catch((function(){t.$message.error("删除失败")}))},employeeRole:function(e){var t=this;this.employeeId=e,Object(i["d"])(e).then((function(e){console.log("res",e),t.checkList=e.roleIds})),Object(s["d"])().then((function(e){t.roleList=e})),this.roleDialogVisible=!0},roleHandleClose:function(){this.roleDialogVisible=!1},roleCancle:function(){this.roleDialogVisible=!1},roleDetermine:function(){var e=this;Object(i["i"])(this.employeeId,this.checkList).then((function(){e.$message.success("角色设置成功")})).catch((function(){e.$message.error("角色设置失败")})),this.roleDialogVisible=!1}},mounted:function(){var e=this;Object(a["c"])().then((function(t){e.lists=Object(c["a"])(t,0)})).catch((function(){e.$message.error("获取失败")})),this.apiGetSysUser(this.params)}},g=v,w=(n("fdcd"),Object(h["a"])(g,o,r,!1,null,"144d18a4",null));t["default"]=w.exports},"77f9":function(e,t,n){},8769:function(e,t,n){"use strict";n("77f9")},"9a0c":function(e,t,n){var o=n("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},cc5e:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return u}));var o=n("b775"),r=function(e){return Object(o["a"])({url:"/sys/role",method:"GET",params:e})},a=function(e){return Object(o["a"])({url:"/sys/role",method:"POST",data:e})},i=function(e){return Object(o["a"])({url:"/sys/role/".concat(e.id),method:"PUT",data:e})},s=function(e){return Object(o["a"])({url:"/sys/role/".concat(e),method:"DELETE"})},c=function(){return Object(o["a"])({url:"/sys/role/list/enabled",method:"GET"})},l=function(e){return Object(o["a"])({url:"/sys/role/".concat(e),method:"GET"})},u=function(e,t){return Object(o["a"])({url:"/sys/role/assignPrem",method:"PUT",data:{id:e,permIds:t}})}},ed08:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("53ca"),n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("159b"),n("14d9");var o=function e(t,n){var o=[];return t.forEach((function(r){if(r.pid===n){o.push(r);var a=e(t,r.id);a.length>0&&(r.children=a)}})),o}},ef75:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return f}));var o=n("b775"),r=function(e){return Object(o["a"])({url:"/sys/user",method:"GET",params:e})},a=function(){return Object(o["a"])({url:"/sys/user/export",method:"GET",responseType:"blob"})},i=function(){return Object(o["a"])({url:"/sys/user/import/template",method:"GET",responseType:"blob"})},s=function(e){return Object(o["a"])({url:"/sys/user/import",method:"POST",data:e})},c=function(e){return Object(o["a"])({url:"/sys/user/".concat(e),method:"DELETE"})},l=function(e){return Object(o["a"])({url:"/sys/user",method:"POST",data:e})},u=function(e){return Object(o["a"])({url:"/sys/user/".concat(e),method:"GET"})},d=function(e,t){return Object(o["a"])({url:"/sys/user/".concat(e),method:"PUT",data:t})},f=function(e,t){return Object(o["a"])({url:"/sys/user/assignRoles",method:"PUT",data:{id:e,roleIds:t}})}},fdcd:function(e,t,n){"use strict";n("36bf")}}]);