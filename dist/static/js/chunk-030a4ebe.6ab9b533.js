(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-030a4ebe"],{"0ccb":function(e,t,r){var n=r("e330"),a=r("50c4"),i=r("577e"),o=r("1148"),c=r("1d80"),s=n(o),d=n("".slice),u=Math.ceil,l=function(e){return function(t,r,n){var o,l,p=i(c(t)),m=a(r),f=p.length,b=void 0===n?" ":i(n);return m<=f||""==b?p:(o=m-f,l=s(b,u(o/b.length)),l.length>o&&(l=d(l,0,o)),e?p+l:l+p)}};e.exports={start:l(!1),end:l(!0)}},"0e8f":function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return d}));var n=r("b775"),a=function(){return Object(n["a"])({url:"/company/department",method:"GET"})},i=function(){return Object(n["a"])({url:"/sys/user/simple",method:"GET"})},o=function(e){return Object(n["a"])({url:"/company/department",method:"POST",data:e})},c=function(e){return Object(n["a"])({url:"/company/department/".concat(e),method:"GET"})},s=function(e,t){return Object(n["a"])({url:"/company/department/".concat(e),method:"PUT",data:t})},d=function(e){return Object(n["a"])({url:"/company/department/".concat(e),method:"DELETE"})}},1148:function(e,t,r){"use strict";var n=r("5926"),a=r("577e"),i=r("1d80"),o=RangeError;e.exports=function(e){var t=a(i(this)),r="",c=n(e);if(c<0||c==1/0)throw o("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(t+=t))1&c&&(r+=t);return r}},"16e1":function(e,t,r){},"46cb":function(e,t,r){"use strict";r("16e1")},"4d90":function(e,t,r){"use strict";var n=r("23e7"),a=r("0ccb").start,i=r("9a0c");n({target:"String",proto:!0,forced:i},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"6edd":function(e,t,r){"use strict";r.r(t);r("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"app-container"},[t("el-tree",{attrs:{data:e.list,props:e.defaultProps,"default-expand-all":!0,"expand-on-click-node":!1,"node-key":"id"},scopedSlots:e._u([{key:"default",fn:function(r){r.node;var n=r.data;return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(n.name))]),t("span",[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(" "+e._s(n.managerName)+" ")]),t("el-dropdown",{attrs:{trigger:"click"},on:{command:function(t){return e.departmentHandle(t,n)}}},[t("span",{staticClass:"el-dropdown-link"},[e._v(" 操作"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"add"}},[e._v("添加子部门")]),t("el-dropdown-item",{attrs:{command:"edit"}},[e._v("编辑部门")]),t("el-dropdown-item",{attrs:{command:"del"}},[e._v("删除")])],1)],1)],1)])}}])})],1),t("addEditDepartment",{ref:"addEditDepartment",attrs:{type:e.type,dialogVisible:e.dialogVisible,dataList:e.dataList},on:{handleClose:e.handleClose,apiGetDepartment:e.apiGetDepartment}})],1)},a=[],i=r("c7eb"),o=r("1da1"),c=r("0e8f"),s=r("ed08"),d=function(){var e=this,t=e._self._c;return t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"add"==e.type?"新增部门":"编辑部门",visible:e.dialogVisible,width:"50%","before-close":e.handleClose,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"2-10个字符",autocomplete:"off"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"部门编码",prop:"code"}},[t("el-input",{attrs:{placeholder:"2-10个字符",autocomplete:"off"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),t("el-form-item",{attrs:{label:"部门负责人",prop:"managerId"}},[t("el-select",{attrs:{placeholder:"请选择","popper-append-to-body":!1,"allow-create":""},model:{value:e.ruleForm.managerId,callback:function(t){e.$set(e.ruleForm,"managerId",t)},expression:"ruleForm.managerId"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"部门介绍",prop:"introduce"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容",autosize:{minRows:2}},model:{value:e.ruleForm.introduce,callback:function(t){e.$set(e.ruleForm,"introduce",t)},expression:"ruleForm.introduce"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)],1)},u=[],l=r("5530"),p=(r("7db0"),r("d3b7"),r("d9e2"),r("4de4"),{props:{dialogVisible:{type:Boolean},type:{type:String},dataList:{type:Object}},data:function(){var e,t,r=this;return{loading:!1,options:[],ruleForm:{name:"",code:"",managerId:"",introduce:"",pid:0,id:0},rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:10,trigger:"change"},{validator:function(t,n,a){return(e=e||Object(o["a"])(Object(i["a"])().mark((function e(t,n,a){var o,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])();case 2:if(o=e.sent,"add"!=r.type){e.next=11;break}if(!o.find((function(e){return e.name==n}))){e.next=8;break}return e.abrupt("return",a(new Error("该部门名称已经存在")));case 8:a();case 9:e.next=17;break;case 11:if(s=o.filter((function(e){return e.id!==r.dataList.id})),!s.find((function(e){return e.name==n}))){e.next=16;break}return e.abrupt("return",a(new Error("该部门名称已经存在")));case 16:a();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)},trigger:"blur"}],code:[{required:!0,message:"请输入部门编码",trigger:"blur"},{min:2,max:10,trigger:"change"},{validator:function(e,n,a){return(t=t||Object(o["a"])(Object(i["a"])().mark((function e(t,n,a){var o,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])();case 2:if(o=e.sent,"add"!=r.type){e.next=11;break}if(!o.find((function(e){return e.code==n}))){e.next=8;break}return e.abrupt("return",a(new Error("该部门编码已经存在")));case 8:a();case 9:e.next=18;break;case 11:if("edit"!=r.type){e.next=18;break}if(s=o.filter((function(e){return e.id!==r.ruleForm.id})),!s.find((function(e){return e.code==n}))){e.next=17;break}return e.abrupt("return",a(new Error("该部门名称已经存在")));case 17:a();case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)},trigger:"blur"}],managerId:[{required:!0,message:"请输入部门负责人",trigger:"blur"}],introduce:[{required:!0,message:"请输入部门介绍",trigger:"change"}]}}},methods:{handleClose:function(){this.$emit("handleClose",!1),this.$refs.ruleForm.resetFields()},editEcho:function(){var e=this;Object(c["b"])(this.dataList.id).then((function(t){e.ruleForm=t}))},submitForm:function(){var e,t=this;this.loading=!0,this.$refs.ruleForm.validate((function(r){return(e=e||Object(o["a"])(Object(i["a"])().mark((function e(r){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r?("add"==t.type?Object(c["e"])(Object(l["a"])(Object(l["a"])({},t.ruleForm),{},{pid:t.dataList.id})).then((function(){t.$emit("apiGetDepartment"),t.$message.success("添加成功")})).catch((function(){t.$message.error("添加失败")})):"edit"==t.type&&Object(c["f"])(t.ruleForm.id,Object(l["a"])({},t.ruleForm)).then((function(){t.$emit("apiGetDepartment"),t.$message.success("编辑成功")})).catch((function(){t.$message.error("编辑失败")})),t.loading=!1,t.handleClose()):(t.$message.error("输入不符合要求"),t.loading=!1);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}))}},mounted:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:r=t.sent,e.options=r;case 4:case"end":return t.stop()}}),t)})))()}}),m=p,f=(r("8da3"),r("2877")),b=Object(f["a"])(m,d,u,!1,null,"31df0a08",null),h=b.exports,g={name:"Department",components:{addEditDepartment:h},data:function(){return{list:[],defaultProps:{children:"children",label:"label"},dialogVisible:!1,type:"",dataList:{}}},methods:{apiGetDepartment:function(){var e=this;Object(c["c"])().then((function(t){e.list=Object(s["a"])(t,0)}))},departmentHandle:function(e,t){var r=this;"add"==e?(this.dataList=t,this.dialogVisible=!0,this.type="add"):"edit"==e?(this.type="edit",this.dataList=t,this.$nextTick((function(){r.$refs.addEditDepartment.editEcho()})),this.dialogVisible=!0):"del"===e&&this.$confirm("确定删除吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])(t.id);case 2:r.apiGetDepartment(),r.$message({type:"success",message:"删除成功"});case 4:case"end":return e.stop()}}),e)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},handleClose:function(e){this.dialogVisible=e}},mounted:function(){this.apiGetDepartment()}},v=g,w=(r("46cb"),Object(f["a"])(v,n,a,!1,null,"5ebd5ad6",null));t["default"]=w.exports},"7db0":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").find,i=r("44d2"),o="find",c=!0;o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},"8da3":function(e,t,r){"use strict";r("f987")},"9a0c":function(e,t,r){var n=r("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},ed08:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("53ca"),r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("d3b7"),r("4d90"),r("159b"),r("14d9");var n=function e(t,r){var n=[];return t.forEach((function(a){if(a.pid===r){n.push(a);var i=e(t,a.id);i.length>0&&(a.children=i)}})),n}},f987:function(e,t,r){}}]);