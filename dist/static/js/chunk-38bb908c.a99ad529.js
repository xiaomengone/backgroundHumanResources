(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38bb908c"],{"0ccb":function(e,t,i){var r=i("e330"),o=i("50c4"),s=i("577e"),n=i("1148"),a=i("1d80"),l=r(n),c=r("".slice),u=Math.ceil,d=function(e){return function(t,i,r){var n,d,m=s(a(t)),f=o(i),p=m.length,h=void 0===r?" ":s(r);return f<=p||""==h?m:(n=f-p,d=l(h,u(n/h.length)),d.length>n&&(d=c(d,0,n)),e?m+d:d+m)}};e.exports={start:d(!1),end:d(!0)}},1148:function(e,t,i){"use strict";var r=i("5926"),o=i("577e"),s=i("1d80"),n=RangeError;e.exports=function(e){var t=o(s(this)),i="",a=r(e);if(a<0||a==1/0)throw n("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},"4d90":function(e,t,i){"use strict";var r=i("23e7"),o=i("0ccb").start,s=i("9a0c");r({target:"String",proto:!0,forced:s},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"6c35":function(e,t,i){"use strict";i.r(t);i("b0c0"),i("a4d3"),i("e01a");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"app-container"},[t("div",{staticClass:"role"},[t("el-row",[t("el-button",{staticClass:"addRole",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加角色")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.lists,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"角色",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.row;return[t("input",{directives:[{name:"model",rawName:"v-model",value:r.editorRow.name,expression:"row.editorRow.name"},{name:"show",rawName:"v-show",value:r.iseditor,expression:"row.iseditor"}],attrs:{type:"text"},domProps:{value:r.editorRow.name},on:{input:function(t){t.target.composing||e.$set(r.editorRow,"name",t.target.value)}}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!r.iseditor,expression:"!row.iseditor"}]},[e._v(e._s(r.name))])]}}])}),t("el-table-column",{attrs:{prop:"state",label:"启用",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.row;return[t("el-switch",{directives:[{name:"show",rawName:"v-show",value:r.iseditor,expression:"row.iseditor"}],attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:r.editorRow.state,callback:function(t){e.$set(r.editorRow,"state",t)},expression:"row.editorRow.state"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!r.iseditor,expression:"!row.iseditor"}]},[e._v(" "+e._s(1==r.state?"已启用":0==r.state?"未启用":"无"))])]}}])}),t("el-table-column",{attrs:{prop:"description",label:"描述",width:"350",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.row;return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:r.iseditor,expression:"row.iseditor"}],attrs:{type:"textarea",rows:1,placeholder:"请输入内容"},model:{value:r.editorRow.description,callback:function(t){e.$set(r.editorRow,"description",t)},expression:"row.editorRow.description"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!r.iseditor,expression:"!row.iseditor"}]},[e._v(" "+e._s(r.description))])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.iseditor?e._e():[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleClick(i.row)}}},[e._v("分配权限")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.edit(i)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text",size:"small"}},[t("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(t){return e.deleteRole(i)}}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("删除")])])],1)],i.row.iseditor?[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editDetermine(i)}}},[e._v("确定")]),t("el-button",{attrs:{type:"text"},on:{click:function(e){i.row.iseditor=!1}}},[e._v("取消")])]:e._e()]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.params.page,"page-size":e.params.pagesize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.currentChange}})],1),t("el-dialog",{attrs:{title:"新增角色",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"启用",prop:"state"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}})],1),t("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.dialogDetermine}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{attrs:{title:"分配权限",visible:e.limitsAuthorityDialogVisible,width:"60%","before-close":e.limitsAuthorityHandleClose},on:{"update:visible":function(t){e.limitsAuthorityDialogVisible=t}}},[t("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"show-checkbox":"","node-key":"id","default-expand-all":!0,"default-checked-keys":e.defaultCheckedKeys},on:{"node-click":e.limitsAuthorityHandleNodeClick}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.limitsAuthorityCancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.limitsAuthorityDetermine}},[e._v("确 定")])],1)],1)],1)])},o=[],s=i("5530"),n=(i("d3b7"),i("159b"),i("cc5e")),a=i("ed08"),l=i("e549"),c={name:"Department",data:function(){return{dialogVisible:!1,limitsAuthorityDialogVisible:!1,params:{page:1,pagesize:5},total:0,lists:[],ruleForm:{name:"",state:0,description:""},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},visible:!1,assignPermissionsId:"",defaultProps:{children:"children",label:"name"},treeData:[],defaultCheckedKeys:[]}},methods:{apiGetRoleList:function(e){var t=this;Object(n["b"])(e).then((function(e){var i=e.total,r=e.rows;t.total=i,t.lists=r,t.lists.forEach((function(e){t.$set(e,"iseditor",!1),t.$set(e,"editorRow",{description:e.description,id:e.id,iseditor:e.iseditor,name:e.name,state:e.state})}))})).catch((function(){t.$message.error("请求失败")}))},handleClick:function(e){var t=this;this.assignPermissionsId=e.id,Object(n["c"])(this.assignPermissionsId).then((function(e){t.defaultCheckedKeys=e.permIds})),Object(l["b"])().then((function(e){t.treeData=Object(a["a"])(e,0)})),this.limitsAuthorityDialogVisible=!0},currentChange:function(e){this.params.page=e,this.apiGetRoleList(this.params)},edit:function(e){e.row.editorRow.id=e.row.id,e.row.editorRow.description=e.row.description,e.row.editorRow.name=e.row.name,e.row.editorRow.state=e.row.state,e.row.editorRow.description=e.row.description,e.row.iseditor=!0},editDetermine:function(e){var t=this,i=e.row;Object(n["f"])(i.editorRow).then((function(){t.apiGetRoleList(t.params),i.iseditor=!1,t.$message.success("编辑成功")})).catch((function(){t.$message.error("删除失败")}))},deleteRole:function(e){var t=this,i=e.row;Object(n["a"])(i.id).then((function(){1==t.lists.length?t.apiGetRoleList(Object(s["a"])(Object(s["a"])({},t.params),{},{page:t.params.page-1})):t.apiGetRoleList(t.params),t.$message.success("删除成功")})).catch((function(){t.$message.error("删除失败")}))},handleClose:function(){this.resetForm(),this.dialogVisible=!1},dialogDetermine:function(){var e=this;Object(n["e"])(this.ruleForm).then((function(t){e.$message.success("新增成功"),e.params={page:1,pagesize:5},e.apiGetRoleList(e.params),e.resetForm()})).catch((function(){e.$message.error("新增失败")})),this.dialogVisible=!1},resetForm:function(){this.$refs.ruleForm.resetFields()},limitsAuthorityHandleClose:function(){this.limitsAuthorityDialogVisible=!1},limitsAuthorityCancle:function(){this.limitsAuthorityDialogVisible=!1},limitsAuthorityHandleNodeClick:function(e){},limitsAuthorityDetermine:function(){var e=this;Object(n["g"])(this.assignPermissionsId,this.$refs.tree.getCheckedKeys()).then((function(){e.$message.success("修改权限成功")})).catch((function(){e.$message.error("修改权限失败")})),this.limitsAuthorityDialogVisible=!1}},mounted:function(){this.apiGetRoleList(this.params)}},u=c,d=(i("d19a"),i("2877")),m=Object(d["a"])(u,r,o,!1,null,"2bc43c76",null);t["default"]=m.exports},"8a9f":function(e,t,i){},"9a0c":function(e,t,i){var r=i("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},cc5e:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"g",(function(){return u}));var r=i("b775"),o=function(e){return Object(r["a"])({url:"/sys/role",method:"GET",params:e})},s=function(e){return Object(r["a"])({url:"/sys/role",method:"POST",data:e})},n=function(e){return Object(r["a"])({url:"/sys/role/".concat(e.id),method:"PUT",data:e})},a=function(e){return Object(r["a"])({url:"/sys/role/".concat(e),method:"DELETE"})},l=function(){return Object(r["a"])({url:"/sys/role/list/enabled",method:"GET"})},c=function(e){return Object(r["a"])({url:"/sys/role/".concat(e),method:"GET"})},u=function(e,t){return Object(r["a"])({url:"/sys/role/assignPrem",method:"PUT",data:{id:e,permIds:t}})}},d19a:function(e,t,i){"use strict";i("8a9f")},e549:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"e",(function(){return l}));var r=i("b775"),o=function(){return Object(r["a"])({url:"/sys/permission",method:"GET"})},s=function(e){return Object(r["a"])({url:"/sys/permission",method:"POST",data:e})},n=function(e){return Object(r["a"])({url:"/sys/permission/".concat(e),method:"DELETE"})},a=function(e){return Object(r["a"])({url:"/sys/permission/".concat(e),method:"GET"})},l=function(e,t){return Object(r["a"])({url:"/sys/permission/".concat(e),method:"PUT",data:t})}},ed08:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("53ca"),i("ac1f"),i("00b4"),i("5319"),i("4d63"),i("c607"),i("2c3e"),i("25f0"),i("d3b7"),i("4d90"),i("159b"),i("14d9");var r=function e(t,i){var r=[];return t.forEach((function(o){if(o.pid===i){r.push(o);var s=e(t,o.id);s.length>0&&(o.children=s)}})),r}}}]);