(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf1ff058"],{"0ccb":function(e,t,i){var r=i("e330"),n=i("50c4"),o=i("577e"),s=i("1148"),l=i("1d80"),a=r(s),c=r("".slice),u=Math.ceil,d=function(e){return function(t,i,r){var s,d,f=o(l(t)),m=n(i),p=f.length,b=void 0===r?" ":o(r);return m<=p||""==b?f:(s=m-p,d=a(b,u(s/b.length)),d.length>s&&(d=c(d,0,s)),e?f+d:d+f)}};e.exports={start:d(!1),end:d(!0)}},1148:function(e,t,i){"use strict";var r=i("5926"),n=i("577e"),o=i("1d80"),s=RangeError;e.exports=function(e){var t=n(o(this)),i="",l=r(e);if(l<0||l==1/0)throw s("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(i+=t);return i}},"4d90":function(e,t,i){"use strict";var r=i("23e7"),n=i("0ccb").start,o=i("9a0c");r({target:"String",proto:!0,forced:o},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"9a0c":function(e,t,i){var r=i("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},a0b1:function(e,t,i){},c23a:function(e,t,i){"use strict";i.r(t);i("b0c0"),i("a4d3"),i("e01a");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"app-container permission"},[t("el-row",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("primary")}}},[e._v("添加权限")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children"}}},[t("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t("el-table-column",{attrs:{prop:"code",label:"标识"}}),t("el-table-column",{attrs:{prop:"description",label:"描述"}}),t("el-table-column",{staticClass:"option",attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.row;return[1==r.type?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.add("second",r)}}},[e._v("添加")]):e._e(),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.add("edit",r)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deletes(r.id)}}},[e._v(" 删除")])]}}])})],1),t("el-dialog",{attrs:{title:"新增权限点",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"权限标识",prop:"code"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),t("el-form-item",{attrs:{label:"权限描述",prop:"description"}},[t("el-input",{model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),t("el-form-item",{attrs:{label:"开启"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.enVisible,callback:function(t){e.$set(e.ruleForm,"enVisible",t)},expression:"ruleForm.enVisible"}})],1),t("el-form-item",[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.determine}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%","before-close":e.deleteHandleClose},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[t("span",[e._v("确定要删除吗？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.deleteHandleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteDetermine}},[e._v("确 定")])],1)])],1)])},n=[],o=i("5530"),s=(i("d3b7"),i("e549")),l=i("ed08"),a={name:"Department",data:function(){return{type:"",tableData:[],dialogVisible:!1,deleteDialogVisible:!1,id:"",ruleForm:{name:"",code:"",description:"",type:null,pid:null,enVisible:null},rules:{name:[{required:!0,message:"请填写名称",trigger:"blur"}],code:[{required:!0,message:"请填写标识",trigger:"blur"}],description:[{required:!0,message:"请填写描述",trigger:"blur"}]}}},methods:{apiGetSysPermission:function(){var e=this;Object(s["b"])().then((function(t){e.tableData=Object(l["a"])(t,0)})).catch((function(){e.message.error("获取失败")}))},add:function(e,t){var i=this;"primary"==e?(this.type="primary",this.ruleForm.type=1):"second"==e?(this.type="second",this.ruleForm.type=2,this.ruleForm.pid=t.id):"edit"==e&&(this.type="edit",this.id=t.id+"",this.ruleForm.pid=t.pid,Object(s["c"])(t.id).then((function(e){i.ruleForm=Object(o["a"])(Object(o["a"])({},e),{},{enVisible:+e.enVisible})}))),this.dialogVisible=!0},handleClose:function(){this.$refs.ruleForm.resetFields(),this.dialogVisible=!1},deleteHandleClose:function(){this.deleteDialogVisible=!1},determine:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){if("primary"==e.type)Object(s["d"])(Object(o["a"])(Object(o["a"])({},e.ruleForm),{},{pid:0})).then((function(t){e.$message.success("添加成功"),e.apiGetSysPermission(),e.ruleForm.enVisible=0})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.handleClose()}));else if("second"==e.type)Object(s["d"])(Object(o["a"])({},e.ruleForm)).then((function(t){e.$message.success("添加成功"),e.apiGetSysPermission()})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.handleClose()}));else if("edit"==e.type){var i=e.id+"";Object(s["e"])(i,Object(o["a"])({},e.ruleForm)).then((function(t){e.$message.success("修改成功")})).catch((function(){this.$message.error("修改失败")})).finally((function(){e.handleClose(),e.apiGetSysPermission()}))}}else e.$message.error("输入不规范，请重新输入")}))},deleteDetermine:function(){var e=this,t=this.id+"";Object(s["a"])(t).then((function(){e.apiGetSysPermission(),e.deleteHandleClose(),e.$message.success("删除成功")})).catch((function(){e.$message.error("删除失败"),e.deleteHandleClose()}))},deletes:function(e){this.deleteDialogVisible=!0,this.id=e}},mounted:function(){this.apiGetSysPermission()}},c=a,u=(i("e2eb"),i("2877")),d=Object(u["a"])(c,r,n,!1,null,"550464c4",null);t["default"]=d.exports},e2eb:function(e,t,i){"use strict";i("a0b1")},e549:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"e",(function(){return a}));var r=i("b775"),n=function(){return Object(r["a"])({url:"/sys/permission",method:"GET"})},o=function(e){return Object(r["a"])({url:"/sys/permission",method:"POST",data:e})},s=function(e){return Object(r["a"])({url:"/sys/permission/".concat(e),method:"DELETE"})},l=function(e){return Object(r["a"])({url:"/sys/permission/".concat(e),method:"GET"})},a=function(e,t){return Object(r["a"])({url:"/sys/permission/".concat(e),method:"PUT",data:t})}},ed08:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("53ca"),i("ac1f"),i("00b4"),i("5319"),i("4d63"),i("c607"),i("2c3e"),i("25f0"),i("d3b7"),i("4d90"),i("159b"),i("14d9");var r=function e(t,i){var r=[];return t.forEach((function(n){if(n.pid===i){r.push(n);var o=e(t,n.id);o.length>0&&(n.children=o)}})),r}}}]);